<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gate Pass - Daraz</title>
  <style>
    body {
      font-family: 'Segoe UI', 'Tahoma', Arial, sans-serif;
      font-size: 11px;
      line-height: 1.3;
      color: #000;
      background: #fff;
      margin: 0;
      padding: 10mm;
    }
    .page {
      width: 210mm;
      min-height: 297mm;
      margin: 0 auto;
      padding: 10mm;
      box-sizing: border-box;
      position: relative;
    }
    .header-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }
    .logo {
      max-height: 20px;
    }
    .gatepass-id {
      font-weight: bold;
      font-size: 13px;
    }
    .company-name {
      font-weight: bold;
      text-align: center;
      margin: 4px 0 8px;
      font-size: 14px;
    }
    .dates-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }
    .challan-row {
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
    }
    /* Sender/Receiver Table */
    .details-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 12px;
    }
    .details-table th {
      background: #f0f0f0;
      padding: 4px;
      font-weight: bold;
      text-align: center;
      border: 1px solid #000;
    }
    .details-table td {
      padding: 5px;
      vertical-align: top;
      border: 1px solid #000;
      width: 50%;
    }
    .field-row {
      margin: 2px 0;
    }
    .field-label {
      display: inline-block;
      min-width: 70px;
      font-weight: bold;
    }
    /* Items Table */
    .items-table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
    }
    .items-table th,
    .items-table td {
      border: 1px solid #000;
      padding: 4px;
      text-align: left;
    }
    .items-table th {
      background: #f0f0f0;
      font-weight: bold;
    }
    /* Remarks Box */
    .remarks-box {
      width: 100%;
      border: 1px solid #000;
      padding: 8px;
      min-height: 60px;
      margin: 12px 0;
      white-space: pre-wrap;
      font-family: inherit;
    }
    .section-title {
      font-weight: bold;
      margin: 14px 0 6px;
      text-decoration: underline;
    }
    /* Prepared By */
    .prepared-by {
      margin: 10px 0;
    }
    /* Signature Blocks */
    .signatures {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .sign-box {
      width: 30%;
      text-align: center;
      border-top: 1px solid #000;
      padding-top: 4px;
      font-size: 10px;
    }
    .footer {
      position: absolute;
      bottom: 10mm;
      left: 10mm;
      right: 10mm;
      text-align: center;
      font-size: 9px;
      color: #555;
      border-top: 1px solid #ccc;
      padding-top: 4px;
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Header -->
    <div class="header-row">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Daraz_logo.svg/1200px-Daraz_logo.svg.png" alt="Daraz" class="logo">
      <div class="gatepass-id">Gate Pass#: <%= gatepass._id ? 'BD-IT' + new Date(gatepass.createdAt).toISOString().replace(/[-:T.]/g, '').slice(0,12) : 'N/A' %></div>
    </div>

    <div class="company-name">Daraz Bangladesh Limited</div>

    <div class="dates-row">
      <div>Dispatch Date: <%= gatepass.date ? new Date(gatepass.date).toLocaleDateString('en-GB') : '____/____/____' %></div>
      <div>Receiving Date: ___________________</div>
    </div>

    <div class="challan-row">Challan Type: Internal</div>

    <!-- Sender & Receiver Table -->
    <table class="details-table">
      <thead>
        <tr>
          <th>Sender’s Details</th>
          <th>Receiver’s Details</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <div class="field-row"><span class="field-label">Name:</span> <%= gatepass.dispatchFrom?.hubName || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Zone:</span> <%= gatepass.dispatchFrom?.hubName || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Address:</span> <%= gatepass.dispatchFrom?.details || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Name:</span> <%= gatepass.sender?.name || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Phone No:</span> <%= gatepass.sender?.phone || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Designation:</span> <%= gatepass.sender?.designation || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Employee ID:</span> <%= gatepass.sender?.employee_id || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Department:</span> <%= gatepass.sender?.department || 'N/A' %></div>
          </td>
          <td>
            <div class="field-row"><span class="field-label">Name:</span> <%= gatepass.dispatchTo?.hubName || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Zone:</span> <%= gatepass.dispatchTo?.hubName || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Address:</span> <%= gatepass.dispatchTo?.details || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Name:</span> <%= gatepass.receiver?.name || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Phone No:</span> <%= gatepass.receiver?.phone || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Designation:</span> <%= gatepass.receiver?.Designation || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Employee ID:</span> <%= gatepass.receiver?.Employee_id || 'N/A' %></div>
            <div class="field-row"><span class="field-label">Department:</span> <%= gatepass.receiver?.Department || 'N/A' %></div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Items Table -->
    <div class="section-title">Items</div>
    <table class="items-table">
      <thead>
        <tr>
          <th>SL NO</th>
          <th>ITEM DESCRIPTION</th>
          <th>QUANTITY</th>
          <th>UNIT</th>
        </tr>
      </thead>
      <tbody>
        <% (gatepass.items || []).forEach((item, idx) => { %>
          <tr>
            <td><%= idx + 1 %></td>
            <td><%= item.name || '' %></td>
            <td><%= item.quantity || '' %></td>
            <td><%= item.unit || '' %></td>
          </tr>
        <% }) %>
        <% if (!gatepass.items || gatepass.items.length === 0) { %>
          <tr><td colspan="4" style="text-align:center;">No items listed</td></tr>
        <% } %>
      </tbody>
    </table>

    <!-- Remarks (Large Text Box) -->
    <div class="section-title">Remarks</div>
    <div class="remarks-box">
      <%= gatepass.remarks || '' %>
    </div>

    <!-- Prepared By -->
    <div class="section-title">Prepared By</div>
    <div class="prepared-by">
      <div class="field-row"><span class="field-label">Name:</span> <%= gatepass.preparedBy?.name || 'N/A' %></div>
      <div class="field-row"><span class="field-label">Designation:</span> <%= gatepass.preparedBy?.designation || 'N/A' %></div>
      <div class="field-row"><span class="field-label">Employee ID:</span> <%= gatepass.preparedBy?.employee_id || 'N/A' %></div>
      <div class="field-row"><span class="field-label">Sign:</span> _________________________</div>
    </div>

    <!-- Signature Blocks -->
    <div class="signatures">
      <div class="sign-box">BEARER SIGNATURE</div>
      <div class="sign-box">AUTHORISED SIGNATURE</div>
      <div class="sign-box">SECURITY CHECK</div>
    </div>

    <!-- Footer -->
    <div class="footer">
      Daraz-Internal-B2 DR-COMP-FRM-GPFRM &nbsp; 28th October, 2024 &nbsp; Version 1.1
    </div>
  </div>
</body>
</html>